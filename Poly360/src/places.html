//= templates/header.html

//= templates/sidebar.html
<section class="main">
    //= templates/content_head.html
    <div class="content">
        <div class="page-title__container">
            <h2 class="page-title">площадки</h2>
        </div>
        <div class="places clearfix">
            <div class="places__list">
                <div id="place1" class="places__item">
                    <a class="places__item-link" href="#">
                        <p class="places__item-name">Формула кино «Горизонт»</p>
                        <p class="places__item-name--abbr">ФК «Горизонт»</p>
                        <p class="places__item-adress">М. “Фрунзенская”<br>Комсомольский проспект, д. 21/10</p>
                        <p class="places__item-contact">+7 (495) 967–8168</p>
                    </a>
                </div>
                <div id="place2" class="places__item">
                    <a class="places__item-link" href="#">
                        <p class="places__item-name">Центр документального кино</p>
                        <p class="places__item-name--abbr">ЦДК</p>
                        <p class="places__item-adress">М. “Парк культуры”<br>Зубовский бульвар”, 2</p>
                        <p class="places__item-contact">+7 (495) 637–7919</p>
                    </a>
                </div>
                <div id="place3" class="places__item">
                    <a class="places__item-link" href="#">
                        <p class="places__item-name">Мультимедиа Арт Музей</p>
                        <p class="places__item-name--abbr">МАММ</p>
                        <p class="places__item-adress">М. “Парк культуры”, М. “Кропоткинская”<br>ул. Остоженка, 16,</p>
                        <p class="places__item-contact">+7 (495) 637–1100</p>
                    </a>
                </div>
                <div id="place4" class="places__item">
                    <a class="places__item-link" href="#">
                        <p class="places__item-name">Библиотекa киноискусства им. С.М. Эйзенштейна</p>
                        <p class="places__item-name--abbr">Библиотекa Эйзенштейна</p>
                        <p class="places__item-adress">М. “Маяковская“, М. “Пушкинская“, М. “Новослободская“<br>ул. Остоженка, 16,</p>
                        <p class="places__item-contact">+7 (495) 637–1100</p>
                    </a>
                </div>
            </div>
            <div id="places__map" class="places__map">
                <!--<img src="img/map_vertical.jpg" alt="" />-->
            </div>
        </div>
        <div class="page-block page-block-events">
            <p class="page-block__title">ЕЩе рекомендуем:</p>
            <ul class="events__list clearfix">
                <li class="events__list-item">
                    <a class="events__list-item-link" href="#"></a>
                    <div class="events__list-item-img">
                        <img src="http://www.cinemablend.com/images/sections/63497/Last_Of_Us_Remastered_63497.jpg" alt="" />
                        <div class="events__list-item-tag tag  bg-red">q+a</div>
                        <div class="events__list-item-date tag">22 окт</div>
                    </div>
                    <div class="events__list-item-info">
                        <h3 class="events__list-item-title">ПИРАТСКАЯ БУХТА: ОТОШЛИ НА МИНИТОЧКУ</h3>
                        <p class="events__list-item-subtitle">The Pirate Bay Away From The Key Board</p>
                        <p class="events__list-item-author">Саймон Клозе</p>
                        <p class="events__list-item-desc">Бельгия, Голландия, Германия</p>
                        <p class="events__list-item-lead">Дискуссия с участием Саймона Клозе, Хироси Накаямо</p>
                        <p class="events__list-item-about">Документальный фильм о The Pirate Bay и его основателях. Половина действия фильма происходит в суде. Подсудимые — три основателя крупнейшего в мире торрент-трекера Pirate Bay — защищают свободу информации. Вот вам документальное свидетельство того, что рамки устаревших законов слишком узки</p>
                    </div>
                </li>
                <li class="events__list-item">
                    <a class="events__list-item-link" href="#"></a>
                    <div class="events__list-item-img">
                        <img src="http://www.cinemablend.com/images/sections/63497/Last_Of_Us_Remastered_63497.jpg" alt="" />
                        <div class="events__list-item-tag tag  bg-purple">событие</div>
                        <div class="events__list-item-date tag">22 окт</div>
                    </div>
                    <div class="events__list-item-info">
                        <h3 class="events__list-item-title">ПОД НАПРЯЖЕНИЕМ</h3>
                        <p class="events__list-item-subtitle">Energized</p>
                        <p class="events__list-item-author">Саймон Клозе</p>
                        <p class="events__list-item-desc">Бельгия, Голландия, Германия</p>
                        <p class="events__list-item-lead">Дискуссия с участием Саймона Клозе, Хироси Накаямо</p>
                        <p class="events__list-item-about">Документальный фильм о The Pirate Bay и его основателях. Половина действия фильма происходит в суде. Подсудимые — три основателя крупнейшего в мире торрент-трекера Pirate Bay — защищают свободу информации. Вот вам документальное свидетельство того, что рамки устаревших законов слишком узки</p>
                    </div>
                </li>
                <li class="events__list-item">
                    <a class="events__list-item-link" href="#"></a>
                    <div class="events__list-item-img">
                        <img src="http://www.cinemablend.com/images/sections/63497/Last_Of_Us_Remastered_63497.jpg" alt="" />
                        <div class="events__list-item-tag tag  bg-red">q+a</div>
                        <div class="events__list-item-date tag">22 окт</div>
                    </div>
                    <div class="events__list-item-info">
                        <h3 class="events__list-item-title">ПИРАТСКАЯ БУХТА: ОТОШЛИ НА МИНИТОЧКУ, а потом еще на минуту</h3>
                        <p class="events__list-item-subtitle">The Pirate Bay Away From The Key Board</p>
                        <p class="events__list-item-author">Саймон Клозе</p>
                        <p class="events__list-item-desc">Бельгия, Голландия, Германия</p>
                        <p class="events__list-item-lead">Дискуссия с участием Саймона Клозе, Хироси Накаямо</p>
                        <p class="events__list-item-about">Документальный фильм о The Pirate Bay и его основателях. Половина действия фильма происходит в суде. Подсудимые — три основателя крупнейшего в мире торрент-трекера Pirate Bay — защищают свободу информации. Вот вам документальное свидетельство того, что рамки устаревших законов слишком узки</p>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    //= templates/footer.html
</section>

</div>
<script>
    $(function(){
        //TODO  сократить код создания меток
        ymaps.ready(init);
        var myMap;
        function init () {
            myMap = new ymaps.Map("places__map", {
                center: [55.76, 37.64],
                behaviors: ['default', 'scrollZoom'],
                zoom: 11
            });

            /* создание меток с кастомными иконками */

            var myPlacemark1 = new ymaps.Placemark([55.8, 37.6], {}, {
                iconImageHref: 'img/icons/location.svg',
                iconImageSize: [20, 30],
                href: 'http://google.ru/'
            });

            var myPlacemark2 = new ymaps.Placemark([55.75, 37.50], {}, {
                iconImageHref: 'img/icons/location.svg',
                iconImageSize: [20, 30],
                href: 'http://google.ru/'
            });

            var myPlacemark3 = new ymaps.Placemark([55.75, 37.71], {}, {
                iconImageHref: 'img/icons/location.svg',
                iconImageSize: [20, 30],
                href: 'http://google.ru/'
            });

            var myPlacemark4 = new ymaps.Placemark([55.70, 37.70], {}, {
                iconImageHref: 'img/icons/location.svg',
                iconImageSize: [20, 30],
                href: 'http://google.ru/'
            });

            /* смена иконок меток при наведении и установка на метки ссылок на площадки */

            myPlacemark1.events.add('mouseenter', function (e) {
                    e.get('target').options.set('iconImageHref', 'img/icons/location_red.svg');
                    $('#place1').addClass('places__item--focused');
                }).add('mouseleave', function (e) {
                    e.get('target').options.set('iconImageHref', 'img/icons/location.svg');
                    $('#place1').removeClass('places__item--focused');
                });
            myPlacemark1.events.add('click', function(e){
                location = e.get('target').options.get('href');
            });

            myPlacemark2.events.add('mouseenter', function (e) {
                    e.get('target').options.set('iconImageHref', 'img/icons/location_red.svg');
                    $('#place2').addClass('places__item--focused');
                }).add('mouseleave', function (e) {
                    e.get('target').options.set('iconImageHref', 'img/icons/location.svg');
                    $('#place2').removeClass('places__item--focused');
                });
            myPlacemark2.events.add('click', function(e){
                location = e.get('target').options.get('href');
            });

            myPlacemark3.events.add('mouseenter', function (e) {
                    e.get('target').options.set('iconImageHref', 'img/icons/location_red.svg');
                    $('#place3').addClass('places__item--focused');
                }).add('mouseleave', function (e) {
                    e.get('target').options.set('iconImageHref', 'img/icons/location.svg');
                    $('#place3').removeClass('places__item--focused');
                });
            myPlacemark3.events.add('click', function(e){
                location = e.get('target').options.get('href');
            });

            myPlacemark4.events.add('mouseenter', function (e) {
                    e.get('target').options.set('iconImageHref', 'img/icons/location_red.svg');
                    $('#place4').addClass('places__item--focused');
                }).add('mouseleave', function (e) {
                    e.get('target').options.set('iconImageHref', 'img/icons/location.svg');
                    $('#place4').removeClass('places__item--focused');
                });
            myPlacemark4.events.add('click', function(e){
                location = e.get('target').options.get('href');
            });

            myMap.geoObjects.add(myPlacemark1)
                            .add(myPlacemark2)
                            .add(myPlacemark3)
                            .add(myPlacemark4);

            /* подсветка меток при наведении на внешний блок */

            $('#place1')
                .mouseenter(function(){
                    myPlacemark1.options.set({
                        iconImageHref: 'img/icons/location_red.svg'
                    });
                })
                .mouseleave(function(){
                    myPlacemark1.options.set({
                        iconImageHref: 'img/icons/location.svg'
                    });
                });
            $('#place2')
                .mouseenter(function(){
                    myPlacemark2.options.set({
                        iconImageHref: 'img/icons/location_red.svg'
                    });
                })
                .mouseleave(function(){
                    myPlacemark2.options.set({
                        iconImageHref: 'img/icons/location.svg'
                    });
                });
            $('#place3')
                .mouseenter(function(){
                    myPlacemark3.options.set({
                        iconImageHref: 'img/icons/location_red.svg'
                    });
                })
                .mouseleave(function(){
                    myPlacemark3.options.set({
                        iconImageHref: 'img/icons/location.svg'
                    });
                });
            $('#place4')
                .mouseenter(function(){
                    myPlacemark4.options.set({
                        iconImageHref: 'img/icons/location_red.svg'
                    });
                })
                .mouseleave(function(){
                    myPlacemark4.options.set({
                        iconImageHref: 'img/icons/location.svg'
                    });
                });
        }
    });
</script>
</body>
</html>
